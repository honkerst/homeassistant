homeassistant:
  auth_providers:
    - type: homeassistant
    - type: trusted_networks
      trusted_networks:
        - 192.168.0.0/24
  # Name of the location where Home Assistant is running
  name: Home
  # Location required to calculate the time the sun rises and sets
  latitude: !secret home_latitude
  longitude: !secret home_longtitude
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: 99.97
  # metric for Metric, imperial for Imperial
  unit_system: metric
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: Europe/London
  # Customization file
  customize: !include customize.yaml


# Show links to resources in log and frontend
# introduction:

# Enables the frontend
frontend: 
  themes: !include_dir_merge_named themes

# Enables configuration UI
config:

lovelace:
  mode: yaml
  resources:
  - url: /hacsfiles/mini-media-player/mini-media-player-bundle.js
    type: module
  - url: /hacsfiles/mini-graph-card/mini-graph-card-bundle.js
    type: module
  - url: /hacsfiles/button-card/button-card.js
    type: module
  - url: /hacsfiles/simple-thermostat/simple-thermostat.js
    type: module
  - url: /hacsfiles/lovelace-card-mod/card-mod.js
    type: module
  - url: /hacsfiles/Home-Assistant-Lovelace-HTML-Jinja2-Template-card/html-template-card.js
    type: js
  - url: /hacsfiles/vertical-stack-in-card/vertical-stack-in-card.js
    type: js
  - url: /hacsfiles/lovelace-auto-entities/auto-entities.js
    type: module
  - url: /hacsfiles/atomic_calendar/atomic_calendar.js
    type: module
  - url: /hacsfiles/lovelace-xiaomi-vacuum-card/xiaomi-vacuum-card.js
    type: module
  - url: /hacsfiles/lovelace-xiaomi-vacuum-map-card/xiaomi-vacuum-map-card.js
    type: module
  - url: /hacsfiles/lovelace-layout-card/layout-card.js
    type: module
  - url: /hacsfiles/state-attribute-element/state-attribute-element.js
    type: module
  - url: /hacsfiles/lovelace-multiple-entity-row/multiple-entity-row.js
    type: module
  - url: /hacsfiles/lovelace-home-feed-card/lovelace-home-feed-card.js
    type: module
  - url: /hacsfiles/custom-header/custom-header.js
    type: module
  - url: /hacsfiles/upcoming-media-card/upcoming-media-card.js
    type: js
  - url: /hacsfiles/weather-card/weather-card.js
    type: module
  - url: /hacsfiles/simple-weather-card/simple-weather-card-bundle.js
    type: module
  - url: /hacsfiles/lovelace-slider-entity-row/slider-entity-row.js
    type: module
  dashboards: 
    lovelace-generated: # Needs to contain a hyphen (-)
      mode: yaml
      filename: nothing.yaml
      title: Generated
      icon: mdi:tools
      show_in_sidebar: true
      require_admin: true
    lovelace-tablet:
      mode: yaml
      title: Tablet
      show_in_sidebar: true
      filename: tablet.yaml
    lovelace-phone:
      mode: yaml
      title: Phone
      show_in_sidebar: false
      filename: phone-view.yaml

# To load set_state.py in the python_scripts folder
python_script:

hue:
  bridges:
    - host: 192.168.0.16
      allow_unreachable: true
      allow_hue_groups: true

influxdb:
  host: localhost
  port: 8086
  database: homeassistant
  username: homeassistant
  password: !secret influx_password
  max_retries: 3
  default_measurement: state

# Uncomment this if you are using SSL/TLS, running in Docker container, etc.
http:
#  base_url: 192.168.0.81:8123
#  base_url: https://thoughton.duckdns.org:8123
#  ssl_certificate: /ssl/fullchain.pem
#  ssl_key: /ssl/privkey.pem
#  Apri 2020 - Now using nginx for https://thoughton.duckdns.org:44444 external and http://192.168.0.81:8123 internal

# Checks for available updates
# Note: This component will send some information about your system to
# the developers to assist with development of Home Assistant.
# For more information, please see:
# https://home-assistant.io/blog/2016/10/25/explaining-the-updater/
updater:
  # Optional, allows Home Assistant developers to focus on popular components.
  # include_used_components: true
#
#
###############################################
#                  Discovery                  #
###############################################
discovery:
  ignore:
    - songpal

counter:
  internet_outages:
    name: Internet outages
    icon: mdi:ip-network
    initial: 0
    step: 1

notify:
  - platform: ios
  - name: pushover-timhiphonex
    platform: pushover
    api_key: !secret pushover_api_key
    user_key: !secret pushover_user_key

###############################################
#                  Platforms                  #
###############################################
tuya:
  username: !secret tuya_login
  password: !secret tuya_password
  country_code: "44"

meross_cloud:
  username: !secret meross_username
  password: !secret meross_password

# TP Link devices
tplink:
  discovery: false
  switch:
    - host: 192.168.0.31
    - host: 192.168.0.32

# Live weather map
camera:
  platform: generic
  name: Raincam
  still_image_url: http://api.sat24.com/animated/GB/rainTMC/1/GMT%20Standard%20Time/1440815
  scan_interval: 600

# Allows you to issue voice commands from the frontend in enabled browsers
conversation:

# Enables support for tracking state changes over time
# history:
#
#


# Example configuration.yaml entry
logger:
  default: info
  logs:
    homeassistant.helpers.script: warning
    homeassistant.components.python_script: warning
#    homeassistant.components.websocket_api: debug
    

# Mobile app
default_config:

# Activate iOS app 
ios:
  push:
    categories:
      - name: finarriveshome
        identifier: 'finarriveshome'
        actions:
          - identifier: 'WELCOME_HOME'
            title: 'Send "Welcome Home"'
            activationMode: 'background'
            authenticationRequired: true
            destructive: true
            behavior: 'default'
          - identifier: 'WELCOME_MESSAGE'
            title: 'Send Message'
            activationMode: 'background'
            authenticationRequired: true
            destructive: false
            behavior: 'textInput'
            textInputButtonTitle: 'Send'
            textInputPlaceholder: 'Message here'
      - name: Notification test
        identifier: 'notificationtest'
        actions:
          - identifier: 'NOTIFICATION_TEST'
            title: 'Send "Notification test"'
            activationMode: 'background'
            authenticationRequired: true
            destructive: true
            behavior: 'default'
          - identifier: 'NOTIFICATION_ALTERNATIVE'
            title: 'Send "Notification alternative"'
            activationMode: 'background'
            authenticationRequired: true
            destructive: false
            behavior: 'textInput'
            textInputButtonTitle: 'Send'
            textInputPlaceholder: 'Message here'

# Enables a map showing the location of tracked devices
map:

# Track the sun
sun:


# Allow diagnosing system problems
system_health:

# Binary sensors
binary_sensor:
  # Custom integration for faster motion sensors with last_updated attribute
  - platform: huesensor
  
  - platform: template
    sensors:
      anyone_home:
        value_template: >-
          {{ is_state('device_tracker.timh_iphonex_2', 'home')
             or is_state('device_tracker.fin_iphone', 'home')
             or is_state('binary_sensor.landing_motion_sensor', 'on')
             or is_state('binary_sensor.office_motion_sensor', 'on')
             or is_state('binary_sensor.stairs_sensor_motion', 'on') }}
# Ping Google 
# refer to as binary_sensor.ping_binary_sensor
  - platform: ping
    host: 8.8.8.8
    scan_interval: 5

# Xiaomi gateway
xiaomi_aqara:
  discovery_retry: 5
  gateways:
    - mac: 04CF8C8FA2AF
      key: FFFB2B691B7443B3

# Text to speech
tts:
  - platform: amazon_polly
    region_name: 'eu-west-2'
    aws_access_key_id: !secret aws_access_key_id
    aws_secret_access_key: !secret aws_secret_access_key
    voice: Joanna
    text_type: ssml
    cache: True
# - platform: google
#   cache: true
#   time_memory: 300
#   base_url: http://192.168.0.81
# - platform: voicerss
#   api_key: 6df920c127814420ae11d8e398c2e52b
#   language: 'uk-UK'
#   codec: mp3
#   voice: tanya
#   emotion: good
#   speed: 2
    
# Cloud
cloud:

# Purge history older than 8 days
recorder:
  purge_keep_days: 1
  purge_interval: 1
  exclude:
    domains:
      - climate
      - group
      - media_player
      - sun
      - zone
      - zwave
    entities:
      - sensor.date
      - sensor.time
      - sensor.date_time
      - sensor.solar_angle
      - sensor.sun_state
      - sensor.worldclock_sensor
      - sensor.chuck_norris_quote
      - sensor.ron_swanson_quote
      - sensor.ron_swanson_quote_api
      - script.work_mode_delayed_office
      - script.bedtime_lights_delayed
      - script.bedtime_lights_delayed_test_2
# random lights
      - script.random_light_dining_room
      - script.random_light_dining_room_loop
      - script.random_light_living_room_floor
      - script.random_light_living_room_floor_loop
      - script.random_light_living_room_sofa
      - script.random_light_living_room_sofa_loop
      - script.random_light_reading_light
      - script.random_light_reading_light_loop
      - automation.random_light_dining_room
      - automation.random_light_dining_room_off
      - automation.random_light_living_room_floor
      - automation.random_light_living_room_floor_off
      - automation.random_light_living_room_sofa
      - automation.random_light_living_room_sofa_off
      - automation.random_light_reading_light
      - automation.random_light_reading_light_off
      - input_boolean.random_light_dining_room
      - input_boolean.random_light_living_room_floor
      - input_boolean.random_light_living_room_sofa
      - input_boolean.random_light_reading_light
# device trackers
      - device_tracker.airport_extreme
      - device_tracker.amazon_8256dfa8e
      - device_tracker.amazon_8aca074c9
      - device_tracker.amazon_c62ce4b0b
      - device_tracker.amazon_echo_show
      - device_tracker.asus_n65u
      - device_tracker.washer_dryer_energy_monitor
#      - device_tracker.fin_iphone
#      - device_tracker.finiphone
#      - device_tracker.fins_iphone_6
      - device_tracker.garden_light_switch
      - device_tracker.google_home_mini
      - device_tracker.hassio
      - device_tracker.hd_homerun
#      - device_tracker.honor_6c
      - device_tracker.i7_27_imac
      - device_tracker.kitchen_airport_express
      - device_tracker.living_room
      - device_tracker.living_room_airport_express
      - device_tracker.lyric_ea5730
      - device_tracker.mac_mini
      - device_tracker.nintendo_switch
      - device_tracker.office_airport_express
      - device_tracker.philips_hue
      - device_tracker.pioneer_vsx_924
      - device_tracker.playstation_4
      - device_tracker.qnap_nas
      - device_tracker.roku_stick
      - device_tracker.sofa_airport_express
      - device_tracker.sony_bravia
      - device_tracker.superhub_lan
      - device_tracker.superhub_wan
      - device_tracker.tim_houghton_s_dig_l21hn
#      - device_tracker.tim_s_ipad_4
#      - device_tracker.tim_s_ipad_7
#      - device_tracker.timh_apple_watch
#      - device_tracker.timh_applewatch
#      - device_tracker.timh_imac_retina
#      - device_tracker.timh_iphonex
#      - device_tracker.timh_iphonex_2
#      - device_tracker.timhiphonex
#      - device_tracker.tims_ipad_4
      - device_tracker.tp_link_deco_mesh_living_room
      - device_tracker.tp_link_deco_mesh_office
      - device_tracker.tp_link_wifi_router
      - device_tracker.xbox_360
      - device_tracker.xbox_systemos
      - device_tracker.xiaomi_gateway
      - device_tracker.youview_box
# mac sensors
      - sensor.mac_cpu_idle_percent
      - sensor.mac_cpu_idle_percent_output
      - sensor.mac_memory_free_output
      - sensor.mac_memory_private
      - sensor.mac_memory_resident
      - sensor.mac_memory_shared
      - sensor.mac_memory_usage_output
      - sensor.mac_network_downloaded
      - sensor.mac_network_uploaded
      - sensor.mac_uptime_days
      - sensor.mac_uptime_hours
      - sensor.mac_uptime_in_hours
      - sensor.mac_uptime_minutes
      - sensor.speedtest_download
      - sensor.speedtest_download_data
      - sensor.speedtest_ping
      - sensor.speedtest_ping_data
      - sensor.speedtest_upload
      - sensor.speedtest_upload_data
      - sensor.itunes_shuffle_status
      - sensor.itunes_shuffle_status_raw
# iOS device sensors
      - sensor.sim_1
      - sensor.sim_1_2
      - sensor.ssid
      - sensor.ssid_2
      - sensor.ssid_3
      - sensor.ssid_4
      - sensor.bssid
      - sensor.bssid_2
      - sensor.bssid_3
      - sensor.bssid_4
      - sensor.steps
      - sensor.steps_2
      - sensor.average_active_pace
      - sensor.average_active_pace_2
      - sensor.battery_level
      - sensor.battery_level_2
      - sensor.battery_level_3
      - sensor.battery_level_4
      - sensor.battery_state
      - sensor.battery_state_2
      - sensor.battery_state_3
      - sensor.battery_state_4
      - sensor.connection_type
      - sensor.connection_type_2
      - sensor.connection_type_3
      - sensor.connection_type_4
      - sensor.distance
      - sensor.distance_2
      - sensor.floors_ascended
      - sensor.floors_ascended_2
      - sensor.floors_descended
      - sensor.floors_descended_2
      - sensor.geocoded_location
      - sensor.geocoded_location_2
      - sensor.geocoded_location_3
      - sensor.geocoded_location_4

# Configurator in sidebar
#panel_iframe:
#  configurator:
#    title: Configurator
#    icon: mdi:wrench
#    url: http://hassio.local:8123/api/hassio_ingress/ow_Q9hrFWAY8w3-UAwp_F411dqbCeIXKlGmgTzrw_vs/
#
#  darksky:
#    title: 'DarkSky'
#    url: 'http://forecast.io/embed/#lat=52.010609&lon=-0.2462267&name=Saffron Walden&color=#d22f30&units=uk'
#
#
#
# DarkSky
weather:
  - platform: darksky
    api_key: f0af48e64a62b473cf49bf52898520fe
#    mode: daily

# Person Tracking
owntracks:
  max_gps_accuracy: 200

#asuswrt:
#  host: 192.168.0.1
#  username: !secret router_admin_username
#  password: !secret router_admin_password

# Google Calendar
google:
  client_id: !secret google_client_id
  client_secret: !secret google_client_secret

# Honeywell Lyric thermostat
lyric:
  client_id: !secret lyric_client_key
  client_secret: !secret lyric_client_secret

###############################################
# Custom component to enable Amazon Echos as media players #
###############################################
#alexa_media:
# accounts:
#   - email: !secret amazon_email
#     password: !secret amazon_password
#     url: amazon.co.uk

###############################################
#                   Includes                  #
###############################################
alert: !include alerts.yaml
sensor: !include_dir_merge_list sensors
group: !include groups.yaml
script: !include_dir_merge_named scripts
automation: !include_dir_merge_list automations
scene: !include scenes.yaml
switch: !include_dir_merge_list switches
input_boolean: !include input_booleans.yaml
logbook: !include logbook.yaml

############################################### 
#   Vacuum cleaner 
############################################### 
vacuum:
  - platform: xiaomi_miio
    host: 192.168.0.144
    token: '437439766f786175644753686e4f4c53'
    name: RoboVac
###############################################
#                   Plants                  #
###############################################
# Dracaena marginata
# Moisture 15-60 %
# Conductivity 350-2000 µS/cm
# Light 1500-6000 lux
# Temp 10-32 °C
#
# Howea forsteriana
# Moisture 15-60 %
# Conductivity 350-2000 µS/cm
# Light 1500-25000 lux
# Temp 8-32 °C
#
#plant:
#  dracaena_marginata:
#    sensors:
#      moisture: sensor.dragon_tree_moisture
#      battery: sensor.dragon_tree_battery
#      temperature: sensor.dragon_tree_temperature
#      conductivity: sensor.dragon_tree_conductivity
#      brightness: sensor.dragon_tree_light_intensity
#    min_moisture: 15
#    max_moisture: 60
#    min_conductivity: 350
#    min_brightness: 1500
#    check_days: 3
#  howea_forsteriana:
#    sensors:
#      moisture: sensor.kentia_palm_moisture
#      battery: sensor.kentia_palm_battery
#      temperature: sensor.kentia_palm_temperature
#      conductivity: sensor.kentia_palm_conductivity
#      brightness: sensor.kentia_palm_light_intensity
#    min_moisture: 15
#    max_moisture: 60
#    min_conductivity: 350
#    min_brightness: 1500
#    check_days: 3
#
###############################################
#  Media Players
###############################################
media_player:
# Plex Media Server
  - platform: plex
    entity_namespace: 'plex'
    include_non_clients: true
    scan_interval: 5
#    show_all_controls: false - deprecated
    use_custom_entity_ids: true
    use_episode_art: true
    remove_unavailable_clients: true
    client_remove_interval: 600
# AV receiver
  - platform: pioneer
    host: 192.168.0.20
# TV
  - platform: braviatv
    host: 192.168.0.21
# iTunes
  - platform: itunes
    host: 192.168.0.4
# Xbox One
  - platform: xboxone
    device: FD000138EFE9FE83
    name: Xbox One
# Use an ADB server to setup a Fire TV device and don't get the running apps
  - platform: androidtv
    name: Kitchen TV
    host: 192.168.0.29
    adb_server_ip: 127.0.0.1
    exclude_unnamed_apps: true
    get_sources: false
    apps:
      uk.co.bbc.iplayer: "BBC iPlayer"
      com.amazon.avod: "Prime Video"
      com.plexapp.android: "Plex"
      com.apple.atve.amazon.appletv: "AppleTV+"
    state_detection_rules:
      'com.apple.atve.amazon.appletv':
        - 'playing':
            'wake_lock_size': 4  # this indentation is important!
        - 'playing':
            'wake_lock_size': 3  # this indentation is important!
        - 'paused':
            'wake_lock_size': 2  # this indentation is important!
        - 'paused':
            'wake_lock_size': 1  # this indentation is important!
        - 'standby'
      'uk.co.bbc.iplayer':
        - 'playing':
            'wake_lock_size': 4  # this indentation is important!
        - 'playing':
            'wake_lock_size': 3  # this indentation is important!
        - 'playing':
            'wake_lock_size': 2  # this indentation is important!
        - 'paused':
            'wake_lock_size': 1  # this indentation is important!
        - 'standby'
      'com.plexapp.android':
        - 'paused':
            'media_session_state': 3  # this indentation is important!
            'wake_lock_size': 1       # this indentation is important!
        - 'playing':
            'media_session_state': 3  # this indentation is important!
        - 'standby'
      'com.amazon.avod':
        - 'playing':
            'wake_lock_size': 4  # this indentation is important!
        - 'playing':
            'wake_lock_size': 3  # this indentation is important!
        - 'paused':
            'wake_lock_size': 2  # this indentation is important!
        - 'paused':
            'wake_lock_size': 1  # this indentation is important!
        - 'standby'
# Echo (old 0.86 setup)
#  - platform: alexa
#    host: 192.168.0.83
#    email: !secret amazon_email
#    password: !secret amazon_password
#    url: amazon.co.uk
#  - platform: alexa
#    host: 192.168.0.231
#    email: !secret amazon_email
#    password: !secret amazon_password
#    url: amazon.co.uk
#
#    name: Google Home Mini
cast:
  media_player:
  - host: 192.168.0.43

###############################################
#  Testing
###############################################
input_select:
# washer dryer status
  washingmachine_status:
    name: Washingmachine Status
    options:
     - "Powered Off"
     - "Running"
     - "Finished"
    initial: "Powered Off"
    icon: mdi:washing-machine
# AV source
  av_source:
    name: AV source
    options:
      - AppleTV
      - PS4
      - XB1
      - YouView
      - Xbox 360
      - Nintendo Switch
    initial: AppleTV
    icon: mdi:television
# iTunes
  itunesplaylist:
    name: Itunes Playlist
    options:
      - Block Party
      - Radio 2
      - Radio 3
      - Radio 4
      - Radio 5
      - TalkSport
      - Jazz Radio
      - Oz Radio
      - Podcasts
    initial: Radio 4
    icon: mdi:music
# iTunes test 1
  itunesplaylist_variable:
    name: Itunes Playlist variable
    options:
      - Block Party
      - Radio 2
      - Radio 3
      - Radio 4
      - Radio 5
      - TalkSport
      - Jazz Radio
      - Oz Radio
      - Podcasts
    initial: Radio 4
    icon: mdi:music
# iTunes test 2
  itunesplaylist_variable_test2:
    name: Itunes Playlist variable 2
    options:
      - block-party
      - radio2
      - radio3
      - radio4
      - radio5live
      - talksport
      - oz-radio
      - jazz-radio
      - podcastshuffle
    initial: radio4
    icon: mdi:music
###############################################
#  Device Trackers
###############################################
device_tracker:
###### remove April 2020, integration is broken as of 0.107.x
# NMAP
#  # static IPs
#  - platform: nmap_tracker
#    hosts:
#      - 192.168.0.2
#      - 192.168.0.3
#      - 192.168.0.4
#      - 192.168.0.20
#      - 192.168.0.21
#      - 192.168.0.22
#      - 192.168.0.23
#      - 192.168.0.24
#      - 192.168.0.25
#      - 192.168.0.26
#      - 192.168.0.27
#      - 192.168.0.28
#      - 192.168.0.29
#      - 192.168.0.123
#      - 192.168.0.141
#      - 192.168.0.144
#      - 192.168.0.160
#      - 192.168.0.179
#      - 192.168.0.243
#      - 192.168.0.249
#    home_interval: 10
#    interval_seconds: 600
#    consider_home: 1
#  # scan DHCP clients
#  - platform: nmap_tracker
#    hosts: 
#      - 192.168.0.65-255
#    home_interval: 10
#    interval_seconds: 600
#    consider_home: 180
#    exclude:
#       # Exclude static IPs
#      - 192.168.0.81
#      - 192.168.0.123
#      - 192.168.0.141
#      - 192.168.0.144
#      - 192.168.0.160
#      - 192.168.0.179
#      - 192.168.0.243
#      - 192.168.0.249
#
#
# iPhone Device Tracker HACS integration 
#
  - platform: iphonedetect
    consider_home: 60
    new_device_defaults:
      track_new_devices: true
    hosts:
      iphonedetect_tim_iphonex: 192.168.0.90
      iphonedetect_fin_iphone6: 192.168.0.91
# Ping 
  - platform: ping
    consider_home: 180
    hosts:
      ### Computers
      timh_imac_retina: 192.168.0.2
      mac_mini: 192.168.0.3
      i7_27_imac: 192.168.0.4
      ### Network
      tp_link_deco_mesh_living_room: 192.168.0.10
      tp_link_deco_mesh_office: 192.168.0.11
      qnap_nas: 192.168.0.12
      living_room_airport_express: 192.168.0.13
      office_airport_express: 192.168.0.14
      xiaomi_gateway: 192.168.0.15
      philips_hue: 192.168.0.16
      kitchen_airport_express: 192.168.0.17
      lyric_ea5730: 192.168.0.18
      ### AV
      pioneer_vsx_924: 192.168.0.20
      sony_bravia: 192.168.0.21
      living_room: 192.168.0.22
      xbox_360: 192.168.0.23
      xbox_one: 192.168.0.24
      playstation_4: 192.168.0.25
      nintendo_switch: 192.168.0.26
      youview: 192.168.0.27
      roku_stick_bedroom: 192.168.0.28
      kitchen_fire_stick: 192.168.0.29
      hd_homerun: 192.168.0.30
      ### Smart speakers
      amazon_echo_show: 192.168.0.40
      amazon_echo_livingroom: 192.168.0.41  # Echo dot doesn't respond to ping
      amazon_echo_landing: 192.168.0.42  # Echo dot doesn't respond to ping
      google_home_mini: 192.168.0.43
      ### phones
      timh_iphonex_2: 192.168.0.90
      fin_iphone: 192.168.0.91
      honor_6c: 192.168.0.92
# iCloud
icloud:
  - username: !secret icloud_username
    password: !secret icloud_password
    with_family: true
    gps_accuracy_threshold: 10
###############################################
#  Input Number
###############################################
# iTunes volume slider
input_number:
  airplay_volume:
    name: Volume
    initial: 0.3
    min: 0
    max: 1
    step: 0.01
###############################################
#  Input Date Time
###############################################
# Date+time input to save the last updated time for Xiaomi motion sensor
input_datetime:
  downstairs_loo_motion_sensor_last_updated:
    name: Last triggered
    has_date: true
    has_time: true
  porch_motion_sensor_last_updated:
    name: Last triggered
    has_date: true
    has_time: true
  kitchen_motion_sensor_last_updated:
    name: Last triggered
    has_date: true
    has_time: true
###############################################
#  Timers
###############################################
timer:
  turnofftheradio:
    duration: '00:00:03'
  turnoffthemusic:
    duration: '00:00:03'
  porch:
    duration: '00:01:00'
  kitchen:
    duration: '00:08:00'
  downstairsloo:
    duration: '00:03:00'
  front_door:
    duration: '00:00:30'
  fridge_door:
    duration: '00:00:35'
  freezer_door:
    duration: '00:00:30'
  side_alley_gate:
    duration: '00:02:30'
  left_shed_door:
    duration: '00:10:00'
  right_shed_door:
    duration: '00:10:00'
  flood_sensor_kitchen:
    duration: '00:00:10'
  flood_sensor_bath:
    duration: '00:00:10'
###############################################
#  Homekit
###############################################
homekit:
  filter:
#    include_domains:
#    e.g. "Hey Siri, turn on Radio 4 [input_boolean]"
#    e.g. "Hey Siri, Block Party louder"
#      - input_boolean
#    exclude_entities:
    include_entities:
      - switch.template_itunes_shuffle_status
      - switch.switch_the_radio
      - switch.switch_the_music
      - input_number.airplay_volume
      - media_player.sony_bravia_tv
      - media_player.itunes
      - media_player.living_room_speakers_airtunes_speaker
      - media_player.kitchen_speakers_airtunes_speaker
      - media_player.office_speakers_airtunes_speaker
      - script.vacuum_office
      - script.vacuum_dining_room
      - script.vacuum_kitchen
      - script.vacuum_living_room
      - script.vacuum_pause
      - script.vacuum_stop
      - script.vacuum_resume
      - script.vacuum_start
      - script.vacuum_cancel
      - script.vacuum_dock
      - script.vacuum_where
      - script.vacuum_locate
      - light.gateway_light_04cf8c8fa2af
      - switch.wall_switch_158d000309dd3f
      - switch.wall_switch_left_158d00030a7792
      - switch.wall_switch_right_158d00030a7792
      - switch.wall_switch_left_158d0003669ca2
      - switch.wall_switch_right_158d0003669ca2
      - switch.fin_fan
      - switch.washer_dryer_energy_monitor
      - switch.ps4
      - switch.xbox_one
      - script.tts_status_report
      - scene.gaming_mode
      - switch.plants_power_strip_switch_1
      - switch.plants_power_strip_switch_2
      - switch.plants_power_strip_switch_3
      - switch.plants_power_strip_switch_4
      - switch.17336502840d8ebe65fe
      - switch.17336502840d8ebe7482
      - switch.17336502840d8ebe8396
      - switch.58850130a4cf12a6aeb2
      - input_boolean.increase_airplay_vol
      - input_boolean.decrease_airplay_vol
      - input_boolean.random_light_living_room_floor
      - input_boolean.random_light_living_room_sofa
      - input_boolean.random_light_reading_light
      - input_boolean.random_light_dining_room
      - input_boolean.all_the_speakers
      - input_boolean.gaming_mode
      - switch.switch_the_radio
      - switch.switch_the_music
      - switch.switch_block_party
      - switch.switch_radio_2
      - switch.switch_radio_3
      - switch.switch_radio_4
      - switch.switch_radio_5
      - switch.switch_talksport
      - switch.switch_oz_radio
      - switch.switch_jazz_radio
      - switch.switch_podcasts
      - switch.itunes_shuffle_switch
      - switch.airplay_speakers_living_room
      - switch.airplay_speakers_kitchen
      - switch.airplay_speakers_office
      - switch.airplay_speakers_computer
      - switch.ps4
      - switch.xbox_one
      - switch.media_player_pioneer_avr
      - switch.media_player_sony_bravia_tv
  entity_config:
    media_player.itunes:
      name: Background music
      feature_list:
        - feature: play_pause
        - feature: toggle_mute
    media_player.living_room:
      feature_list:
        - feature: play_pause
    media_player.sony_bravia_tv:
      name: TV
      feature_list:
        - feature: on_off
        - feature: toggle_mute
    media_player.pioneer_avr:
      feature_list:
        - feature: on_off
        - feature: toggle_mute
###############################################
# Alexa Smart Home API #
###############################################
alexa:
  smart_home:
    filter:
      include_entities:
        - switch.template_itunes_shuffle_status
        - switch.switch_the_radio
        - switch.switch_the_music
        - input_number.airplay_volume
        - media_player.sony_bravia_tv
        - media_player.itunes
        - media_player.living_room_speakers_airtunes_speaker
        - media_player.kitchen_speakers_airtunes_speaker
        - media_player.office_speakers_airtunes_speaker
        - script.vacuum_office
        - script.vacuum_dining_room
        - script.vacuum_kitchen
        - script.vacuum_living_room
        - script.vacuum_pause
        - script.vacuum_stop
        - script.vacuum_resume
        - script.vacuum_start
        - script.vacuum_cancel
        - script.vacuum_dock
        - script.vacuum_where
        - script.vacuum_locate
        - light.gateway_light_04cf8c8fa2af
        - switch.wall_switch_158d000309dd3f
        - switch.wall_switch_left_158d00030a7792
        - switch.wall_switch_right_158d00030a7792
        - switch.wall_switch_left_158d0003669ca2
        - switch.wall_switch_right_158d0003669ca2
        - switch.fin_fan
        - switch.washer_dryer_energy_monitor
        - switch.ps4
        - switch.xbox_one
        - script.tts_status_report
        - scene.gaming_mode
        - switch.plants_power_strip_switch_1
        - switch.plants_power_strip_switch_2
        - switch.plants_power_strip_switch_3
        - switch.plants_power_strip_switch_4
        - switch.17336502840d8ebe65fe
        - switch.17336502840d8ebe7482
        - switch.17336502840d8ebe8396
        - switch.58850130a4cf12a6aeb2
        - input_boolean.increase_airplay_vol
        - input_boolean.decrease_airplay_vol
        - input_boolean.random_light_living_room_floor
        - input_boolean.random_light_living_room_sofa
        - input_boolean.random_light_reading_light
        - input_boolean.random_light_dining_room
        - input_boolean.all_the_speakers
        - input_boolean.gaming_mode
        - switch.switch_the_radio
        - switch.switch_the_music
        - switch.switch_block_party
        - switch.switch_radio_2
        - switch.switch_radio_3
        - switch.switch_radio_4
        - switch.switch_radio_5
        - switch.switch_talksport
        - switch.switch_oz_radio
        - switch.switch_jazz_radio
        - switch.switch_podcasts
        - switch.itunes_shuffle_switch
        - switch.airplay_speakers_living_room
        - switch.airplay_speakers_kitchen
        - switch.airplay_speakers_office
        - switch.airplay_speakers_computer
        - switch.ps4
        - switch.xbox_one
        - switch.media_player_pioneer_avr
        - switch.media_player_sony_bravia_tv
#      include_domains:
#        - input_boolean
#      exclude_entities:
#        - switch.outside
    entity_config:
      script.vacuum_office:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_dining_room:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_kitchen:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_living_room:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_pause:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_stop:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_resume:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_start:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_cancel:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_dock:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_where:
        display_categories: ACTIVITY_TRIGGER
      script.vacuum_locate:
        display_categories: ACTIVITY_TRIGGER
      switch.wall_switch_158d000309dd3f:
        name: "Downstairs loo light"
        description: "The light in the downstairs loo"
        display_categories: LIGHT
      switch.wall_switch_left_158d00030a7792:
        name: "Kitchen strip lights left"
        display_categories: LIGHT
      switch.wall_switch_right_158d00030a7792:
        name: "Kitchen spotlights front"
        display_categories: LIGHT
      switch.wall_switch_left_158d0003669ca2:
        name: "Kitchen spotlights back"
        display_categories: LIGHT
      switch.wall_switch_right_158d0003669ca2:
        name: "Kitchen strip lights right"
        display_categories: LIGHT
      switch.fin_fan:
        display_categories: FAN
      media_player.living_room_speakers_airtunes_speaker:
        name: "Living room speakers"
        display_categories: SPEAKER
      media_player.kitchen_speakers_airtunes_speaker:
        name: "Kitchen speakers"
        display_categories: SPEAKER
      media_player.office_speakers_airtunes_speaker:
        name: "Office speakers"
        display_categories: SPEAKER
      switch.17336502840d8ebe65fe:
        name: "Jed fan"
        display_categories: FAN
      switch.17336502840d8ebe7482:
        name: "Tim fan"
        display_categories: FAN
      switch.17336502840d8ebe8396:
        name: "Subwoofer"
        display_categories: SPEAKER
      switch.58850130a4cf12a6aeb2:
        name: "Dragon plant"
        display_categories: LIGHT
      switch.plants_power_strip_switch_1:
        name: "Shower light"
        display_categories: LIGHT
      switch.plants_power_strip_switch_2:
        name: "Shower heater"
        display_categories: SMARTPLUG
      switch.plants_power_strip_switch_3:
        name: "Shower fan"
        display_categories: FAN
      switch.plants_power_strip_switch_4:
        name: "Shower pump"
        display_categories: SMARTPLUG
###############################################
#  Alexa
###############################################
