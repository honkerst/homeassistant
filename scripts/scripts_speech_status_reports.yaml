########################################################
########        Status report             ########
########################################################
alexa_status_report:
  alias: Alexa Status report
  sequence:
    - service: media_player.volume_set
      data:
        entity_id: media_player.dining_room_speaker
        volume_level: 0.3
    - delay: 00:00:01
    - service: script.general_status_report
      data_template:
      #  can be either Google Mini (dining_room_speaker or landing_speaker)
        mplayer: "dining_room_speaker"

# - alias: Bedroom light
#  trigger:
#    platform: state
#    entity_id: light.bedside_lamp
#    to: 'on'
#  action:
#    - service: script.audio_notify
#      data_template:
#        tts_msg: "The {{ trigger.to_state.attributes.friendly_name }} is: {{ trigger.to_state.state }}"
#        mplayer: "living_room_echo"

general_status_report:
  alias: General status report
  sequence:
    - service: media_player.volume_set
      data_template:
        entity_id: media_player.{{ mplayer }}
        volume_level: 0.3
    - delay: 00:00:01
    - service: tts.amazon_polly_say
      data_template:       
        entity_id: media_player.{{ mplayer }}
        message: >
          <speak>
            {% if now().strftime("%H")|int < 5 %}
            {{ [
            "You're up late ... ",
            "Its really late ... "
            ] |random }}
            {% elif now().strftime("%H")|int < 12 %}
              "Good morning."
            {% elif now().strftime("%H")|int < 18 %}
              "Good afternoon."
            {% else %}
              "Good evening."
            {% endif %}
          <break time="1s"/>
          
            {% if is_state('lock.assa_abloy_yale_conexis_l1_sd_l1000_ch_locked', 'unlocked') and is_state('sensor.window_sliding_door_lock', 'Unlocked') %}
                {{ [
                  "Heads up ",
                  "Attention ",
                  "Be aware  ",
                  "You should know  ",
                  "Be careful  ",
                  "Warning  ",
                  "Alert "
                ] |random }}
                {{ [
                "The front door and sliding door have both not been locked ... ",
                "The front door and sliding doors are both unlocked ... ",
                "Both the front door and sliding door have not been locked ... ",
                "The front door and sliding door are both unlocked ... ",
                "The front door and sliding doors haven't yet been locked ... ",
                "The front door and sliding doors are not locked ... ",
                "Both the front door and sliding doors have been left unlocked ... ",
                "The front door and sliding doors are still unlocked ... "
                ] |random }}
            {% elif is_state('lock.assa_abloy_yale_conexis_l1_sd_l1000_ch_locked', 'unlocked') %}
                {{ [
                "The front door lock has not been locked ... ",
                "The front door lock is unlocked ... ",
                "The front door has not been locked ... ",
                "The front door is unlocked ... ",
                "The front door hasn't yet been locked ... ",
                "The front door is not locked ... ",
                "The front door has been left unlocked ... ",
                "The front door is still unlocked ... "
                ] |random }}
            {% elif is_state('sensor.window_sliding_door_lock', 'Unlocked') %}
                {{ [
                "The sliding door has not been locked ... ",
                "The sliding door has not been secured ... ",
                "The sliding door isn't locked ... ",
                "The sliding door isn't secured ... ",
                "The sliding door is not locked ... ",
                "The sliding door is not secured ... "
                ] |random }}
            {% else %}
                {{ [
                "The front door and sliding doors have both been locked ... ",
                "The front door and sliding doors are both locked ... ",
                "Both the front door and sliding door have been locked ... ",
                "The front door and sliding door are both locked ... ",
                "The front door and sliding doors have been locked ... ",
                "The front door and sliding doors are locked ... ",
                "Both the front door and sliding doors have been locked ... ",
                "The front door and sliding door locks are engaged ... ",
                "Both the front door and sliding door locks are engaged ... ",
                "The front door and sliding door locks are both engaged ... "
                ] |random }}
            {% endif %}
          <break time="1s"/>
            {% if is_state('alarm_control_panel.home_security', 'disarmed') %}
                {% if is_state('lock.assa_abloy_yale_conexis_l1_sd_l1000_ch_locked', 'locked') %}
                  {{ [
                    "but ",
                    "although  ",
                    "however  "
                  ] |random }}
                {% endif %}
                {% if is_state('lock.assa_abloy_yale_conexis_l1_sd_l1000_ch_locked', 'unlocked') %}
                  {{ [
                    "and ",
                    "and also  ",
                    "in addition  "
                  ] |random }}
                {% endif %}
                {{ [
                "The alarm has not been set ... ",
                "The alarm has not been armed ... ",
                "The alarm isn't set ... ",
                "The alarm isn't armed ... ",
                "The alarm is not set ... ",
                "The alarm is not armed ... "
                ] |random }}
            {% endif %}
          <break time="1s"/>
            {% if is_state('sensor.window_kitchen', 'Open') or is_state('sensor.window_dining_room', 'Open')  %}
              {{ [
                "In addition, I believe  ",
                "In addition, I think  ",
                "In addition, I'm detecting that  ",
                "I also believe  ",
                "I also think  ",
                "I'm also detecting that  ",
                "Also, I believe  ",
                "Also, I think  ",
                "Also, I'm detecting that  "
              ] |random }}
              {% if is_state('sensor.window_kitchen', 'Open') and is_state('sensor.window_dining_room', 'Open')  %}
            <break time="200ms"/>
                {{ [
                  "The Kitchen and Dining Room windows are both still open.",
                  "The Kitchen and Dining Room windows are both open.",
                  "The Kitchen and Dining Room windows are all open.",
                  "The Kitchen and Dining Room windows are open.",
                  "The Kitchen and Dining Room windows haven't been closed."
                ] |random }}
                {% elif is_state('sensor.window_kitchen', 'Open') %}
                {{ [
                  "The Kitchen window has been left open ... ",
                  "The Kitchen window is still open ... ",
                  "The Kitchen window hasn't been closed ... ",
                  "The Kitchen window hasn't been shut ... "
                ] |random }}
                {% elif is_state('sensor.window_dining_room', 'Open') %}
                {{ [
                  "The Dining room window has been left open ... ",
                  "The Dining room window is still open ... ",
                  "The Dining room window hasn't been closed ... ",
                  "The Dining room window hasn't been shut ... "
                ] |random }}
              {% endif %}
              {% if is_state('sensor.window_fin', 'Open') and is_state('sensor.window_jed', 'Open')  %}
            <break time="200ms"/>
                {{ [
                  "Jed and Fins windows are both still open.",
                  "Jeds window and Fins window are both open.",
                  "The boys windows are both open.",
                  "The boys have left their windows open.",
                  "The kids windows are open.",
                  "The kids windows haven't been closed."
                ] |random }}
                {% elif is_state('sensor.window_fin', 'Open') %}
                {{ [
                  "Fins window has been left open ... ",
                  "Fins window is still open ... ",
                  "Fin has left a window open ... ",
                  "Fin still has a window open ... ",
                  "Fins window hasn't been closed ... ",
                  "Fins window hasn't been shut ... "
                ] |random }}
                {% elif is_state('sensor.window_jed', 'Open') %}
                {{ [
                  "Jeds window has been left open ... ",
                  "Jeds window is still open ... ",
                  "Jed has left a window open ... ",
                  "Jed still has a window open ... ",
                  "Jeds window hasn't been closed ... ",
                  "Jeds window hasn't been shut ... "
                ] |random }}
              {% endif %}
            {% endif %}
          <break time="200ms"/>
            {% if is_state('sensor.window_left_shed_door', 'Closed') and is_state('sensor.window_right_shed_door', 'Closed') and is_state('sensor.window_side_alley_gate', 'Closed')   %}
              {{ [
              "The shed doors and side gate are all shut.",
              "The shed doors and side gate are all closed.",
              "The side gate and shed doors are all shut.",
              "The side gate and shed doors are all closed."
              ] |random }}
              {% elif is_state('sensor.window_left_shed_door', 'Closed') and is_state('sensor.window_right_shed_door', 'Closed') %}
              {{ [
              "Both shed doors are closed but the side gate is still open.",
              "Both shed doors are shut but the side gate is still open.",
              "Both shed doors are closed but the side gate hasn't been shut.",
              "Both shed doors are closed but the side gate has been left open.",
              "Both shed doors are shut but the side gate has been left open."
              ] |random }}
              {% elif is_state('sensor.window_right_shed_door', 'Open') and is_state('sensor.window_side_alley_gate', 'Open') %}
              {{ [
              "The right shed door and the side gate have both been left open.",
              "Both the right shed door and the side gate haven't been shut.",
              "The right shed door and the side gate are still open."
              ] |random }}
              {% elif is_state('sensor.window_left_shed_door', 'Open') and is_state('sensor.window_side_alley_gate', 'Open') %}
              {{ [
              "The left shed door and the side gate have both been left open.",
              "Both the left shed door and the side gate haven't been shut.",
              "The left shed door and the side gate are still open."
              ] |random }}
              {% elif is_state('sensor.window_right_shed_door', 'Open') and is_state('sensor.window_side_alley_gate', 'Closed') %}
              {{ [
              "The side gate is closed but the right shed door has been left open.",
              "The side gate is shut but the right shed door has been left open.",
              "The side gate is closed but the right shed door is still open.",
              "The side gate is shut but the right shed door is still open."
              ] |random }}
              {% elif is_state('sensor.window_left_shed_door', 'Open') and is_state('sensor.window_side_alley_gate', 'Closed') %}
              {{ [
              "The side gate is closed but the left shed door has been left open.",
              "The side gate is shut but the left shed door has been left open.",
              "The side gate is closed but the left shed door is still open.",
              "The side gate is shut but the left shed door is still open."
              ] |random }}
              {% elif is_state('sensor.window_left_shed_door', 'Open') and is_state('sensor.window_right_shed_door', 'Open') %}
              {{ [
              "Both shed doors are still open but the side gate is closed.",
              "Both shed doors are still open but the side gate is shut.",
              "The side gate is closed but both shed doors are still open.",
              "The side gate is shut but both shed doors are still open."
              ] |random }}
              {% else %}
              {{ [
              "The side gate and shed doors all haven't been closed.",
              "The side gate and shed doors all haven't been shut.",
              "The side gate and shed doors are all still open."
              ] |random }}
            {% endif %}
          <break time="500ms"/>
            {{ [
            "The house temperature is",
            "At the moment the house temperature is",
            "The house temperature at the moment is",
            "Right now the house temperature is",
            "The house temperature right now is",
            "Currently the house temperature is",
            "The house temperature is currently"
            ] |random }}
            {{states.sensor.stairs_movement_temperature.state|round(0)}}
            {{ [
            "degrees",
            "degrees centigrade."
            ] |random }} 
          <break time="100ms"/>
            {{ [
            "While ",
            "And "
            ] |random }}
            {{ [
            "The thermostat is set to ",
            "The thermostat is at ",
            "The thermostat is currently at ",
            "The thermostat is currently set to "
            ] |random }}
            {{state_attr('climate.lyric', 'temperature')|round(0)}}
            {{ [
            "degrees",
            "degrees centigrade."
            ] |random }} 
          <break time="500ms"/>
            {{ [
            "I have no other news ... " ,
            "I have nothing else to report ... " ,
            "That's it for me ... " ,
            "Nothing else to report ... " ,
            "Report ends ... " ,
            "End of report ... ",
            "That's all for now ... ",
            "That's all from me ... "
            ] |random }}
            {% if now().strftime("%H")|int < 5 %}
            {{ [
            "Good night ... ",
            "Have a good night ... ",
            "Sleep well ... "
            ] |random }}
            {% elif now().strftime("%H")|int < 14 %}
            {{ [
            "Hope you have a good day ... ",
            "Hope you have a good morning ... ",
            "Enjoy your day ... ",
            "Enjoy your morning ... ",
            "Have a good morning ... ",
            "Have a great day ... ",
            "Have a good day ... "
            ] |random }}
            {% elif now().strftime("%H")|int < 18 %}
            {{ [
            "Good afternoon ... ",
            "Good day ... "
            ] |random }}
            {% else %}
            {{ [
            "Good night ... ",
            "Have a good night ... ",
            "Enjoy your evening ... ",
            "Sleep well ... "
            ] |random }}
            {% endif %}
          </speak>

end_of_day_status_report_volume_set_kids:
  alias: General status report - kids
  sequence:
    - condition: template
      value_template: "{{ states.person.fin.state == 'home' }}"
    # - condition: state
    #   entity_id: person.fin
    #   state: "home"
    - service: media_player.volume_set
      data:
        entity_id: media_player.landing_speaker
        volume_level: 0.2
        
end_of_day_status_report_volume_set_no_kids:
  alias: General status report - no kids
  sequence:
    - condition: template
      value_template: "{{ states.person.fin.state != 'home' }}"
    # - condition: not
    #   conditions:
    #     - condition: state
    #       entity_id: person.fin
    #       state: "home"
    - service: media_player.volume_set
      data:
        entity_id: media_player.landing_speaker
        volume_level: 0.4

tts_status_report:
  alias: Status report
  sequence:
    - service: script.end_of_day_status_report_volume_set_kids
    - service: script.end_of_day_status_report_volume_set_no_kids
    - delay: 00:00:01
    # - service: script.house_speech_kitchen
    #   entity_id: script.house_speech_kitchen
#      data_template:
#        tts_msg: >
    - service: tts.amazon_polly_say
      data_template:
        entity_id: media_player.landing_speaker
        message: >
          <speak>
            {% if now().strftime("%H")|int < 5 %}
            {{ [
            "You're up late ... ",
            "Its really late ... "
            ] |random }}
            {% elif now().strftime("%H")|int < 12 %}
              "Good morning."
            {% elif now().strftime("%H")|int < 18 %}
              "Good afternoon."
            {% else %}
              "Good evening."
            {% endif %}
          <break time="1s"/>
          
            {% if is_state('lock.assa_abloy_yale_conexis_l1_sd_l1000_ch_locked', 'unlocked') and is_state('sensor.window_sliding_door_lock', 'Unlocked') %}
                {{ [
                  "Heads up ",
                  "Attention ",
                  "Be aware  ",
                  "You should know  ",
                  "Be careful  ",
                  "Warning  ",
                  "Alert "
                ] |random }}
                {{ [
                "The front door and sliding door have both not been locked ... ",
                "The front door and sliding doors are both unlocked ... ",
                "Both the front door and sliding door have not been locked ... ",
                "The front door and sliding door are both unlocked ... ",
                "The front door and sliding doors haven't yet been locked ... ",
                "The front door and sliding doors are not locked ... ",
                "Both the front door and sliding doors have been left unlocked ... ",
                "The front door and sliding doors are still unlocked ... "
                ] |random }}
            {% elif is_state('lock.assa_abloy_yale_conexis_l1_sd_l1000_ch_locked', 'unlocked') %}
                {{ [
                "The front door lock has not been locked ... ",
                "The front door lock is unlocked ... ",
                "The front door has not been locked ... ",
                "The front door is unlocked ... ",
                "The front door hasn't yet been locked ... ",
                "The front door is not locked ... ",
                "The front door has been left unlocked ... ",
                "The front door is still unlocked ... "
                ] |random }}
            {% elif is_state('sensor.window_sliding_door_lock', 'Unlocked') %}
                {{ [
                "The sliding door has not been locked ... ",
                "The sliding door has not been secured ... ",
                "The sliding door isn't locked ... ",
                "The sliding door isn't secured ... ",
                "The sliding door is not locked ... ",
                "The sliding door is not secured ... "
                ] |random }}
            {% else %}
                {{ [
                "The front door and sliding doors have both been locked ... ",
                "The front door and sliding doors are both locked ... ",
                "Both the front door and sliding door have been locked ... ",
                "The front door and sliding door are both locked ... ",
                "The front door and sliding doors have been locked ... ",
                "The front door and sliding doors are locked ... ",
                "Both the front door and sliding doors have been locked ... ",
                "The front door and sliding door locks are engaged ... ",
                "Both the front door and sliding door locks are engaged ... ",
                "The front door and sliding door locks are both engaged ... "
                ] |random }}
            {% endif %}
          <break time="1s"/>
            {% if is_state('alarm_control_panel.home_security', 'disarmed') %}
                {% if is_state('lock.assa_abloy_yale_conexis_l1_sd_l1000_ch_locked', 'locked') %}
                  {{ [
                    "but ",
                    "although  ",
                    "however  "
                  ] |random }}
                {% endif %}
                {% if is_state('lock.assa_abloy_yale_conexis_l1_sd_l1000_ch_locked', 'unlocked') %}
                  {{ [
                    "and ",
                    "and also  ",
                    "in addition  "
                  ] |random }}
                {% endif %}
                {{ [
                "The alarm has not been set ... ",
                "The alarm has not been armed ... ",
                "The alarm isn't set ... ",
                "The alarm isn't armed ... ",
                "The alarm is not set ... ",
                "The alarm is not armed ... "
                ] |random }}
            {% endif %}
          <break time="1s"/>
            {% if is_state('sensor.window_kitchen', 'Open') or is_state('sensor.window_dining_room', 'Open')  %}
              {{ [
                "In addition, I believe  ",
                "In addition, I think  ",
                "In addition, I'm detecting that  ",
                "I also believe  ",
                "I also think  ",
                "I'm also detecting that  ",
                "Also, I believe  ",
                "Also, I think  ",
                "Also, I'm detecting that  "
              ] |random }}
              {% if is_state('sensor.window_kitchen', 'Open') and is_state('sensor.window_dining_room', 'Open')  %}
            <break time="200ms"/>
                {{ [
                  "The Kitchen and Dining Room windows are both still open.",
                  "The Kitchen and Dining Room windows are both open.",
                  "The Kitchen and Dining Room windows are all open.",
                  "The Kitchen and Dining Room windows are open.",
                  "The Kitchen and Dining Room windows haven't been closed."
                ] |random }}
                {% elif is_state('sensor.window_kitchen', 'Open') %}
                {{ [
                  "The Kitchen window has been left open ... ",
                  "The Kitchen window is still open ... ",
                  "The Kitchen window hasn't been closed ... ",
                  "The Kitchen window hasn't been shut ... "
                ] |random }}
                {% elif is_state('sensor.window_dining_room', 'Open') %}
                {{ [
                  "The Dining room window has been left open ... ",
                  "The Dining room window is still open ... ",
                  "The Dining room window hasn't been closed ... ",
                  "The Dining room window hasn't been shut ... "
                ] |random }}
              {% endif %}
              {% if is_state('sensor.window_fin', 'Open') and is_state('sensor.window_jed', 'Open')  %}
            <break time="200ms"/>
                {{ [
                  "Jed and Fins windows are both still open.",
                  "Jeds window and Fins window are both open.",
                  "The boys windows are both open.",
                  "The boys have left their windows open.",
                  "The kids windows are open.",
                  "The kids windows haven't been closed."
                ] |random }}
                {% elif is_state('sensor.window_fin', 'Open') %}
                {{ [
                  "Fins window has been left open ... ",
                  "Fins window is still open ... ",
                  "Fin has left a window open ... ",
                  "Fin still has a window open ... ",
                  "Fins window hasn't been closed ... ",
                  "Fins window hasn't been shut ... "
                ] |random }}
                {% elif is_state('sensor.window_jed', 'Open') %}
                {{ [
                  "Jeds window has been left open ... ",
                  "Jeds window is still open ... ",
                  "Jed has left a window open ... ",
                  "Jed still has a window open ... ",
                  "Jeds window hasn't been closed ... ",
                  "Jeds window hasn't been shut ... "
                ] |random }}
              {% endif %}
            {% endif %}
          <break time="200ms"/>
            {% if is_state('sensor.window_left_shed_door', 'Closed') and is_state('sensor.window_right_shed_door', 'Closed') and is_state('sensor.window_side_alley_gate', 'Closed')   %}
              {{ [
              "The shed doors and side gate are all shut.",
              "The shed doors and side gate are all closed.",
              "The side gate and shed doors are all shut.",
              "The side gate and shed doors are all closed."
              ] |random }}
              {% elif is_state('sensor.window_left_shed_door', 'Closed') and is_state('sensor.window_right_shed_door', 'Closed') %}
              {{ [
              "Both shed doors are closed but the side gate is still open.",
              "Both shed doors are shut but the side gate is still open.",
              "Both shed doors are closed but the side gate hasn't been shut.",
              "Both shed doors are closed but the side gate has been left open.",
              "Both shed doors are shut but the side gate has been left open."
              ] |random }}
              {% elif is_state('sensor.window_right_shed_door', 'Open') and is_state('sensor.window_side_alley_gate', 'Open') %}
              {{ [
              "The right shed door and the side gate have both been left open.",
              "Both the right shed door and the side gate haven't been shut.",
              "The right shed door and the side gate are still open."
              ] |random }}
              {% elif is_state('sensor.window_left_shed_door', 'Open') and is_state('sensor.window_side_alley_gate', 'Open') %}
              {{ [
              "The left shed door and the side gate have both been left open.",
              "Both the left shed door and the side gate haven't been shut.",
              "The left shed door and the side gate are still open."
              ] |random }}
              {% elif is_state('sensor.window_right_shed_door', 'Open') and is_state('sensor.window_side_alley_gate', 'Closed') %}
              {{ [
              "The side gate is closed but the right shed door has been left open.",
              "The side gate is shut but the right shed door has been left open.",
              "The side gate is closed but the right shed door is still open.",
              "The side gate is shut but the right shed door is still open."
              ] |random }}
              {% elif is_state('sensor.window_left_shed_door', 'Open') and is_state('sensor.window_side_alley_gate', 'Closed') %}
              {{ [
              "The side gate is closed but the left shed door has been left open.",
              "The side gate is shut but the left shed door has been left open.",
              "The side gate is closed but the left shed door is still open.",
              "The side gate is shut but the left shed door is still open."
              ] |random }}
              {% elif is_state('sensor.window_left_shed_door', 'Open') and is_state('sensor.window_right_shed_door', 'Open') %}
              {{ [
              "Both shed doors are still open but the side gate is closed.",
              "Both shed doors are still open but the side gate is shut.",
              "The side gate is closed but both shed doors are still open.",
              "The side gate is shut but both shed doors are still open."
              ] |random }}
              {% else %}
              {{ [
              "The side gate and shed doors all haven't been closed.",
              "The side gate and shed doors all haven't been shut.",
              "The side gate and shed doors are all still open."
              ] |random }}
            {% endif %}
          <break time="500ms"/>
            {{ [
            "The house temperature is",
            "At the moment the house temperature is",
            "The house temperature at the moment is",
            "Right now the house temperature is",
            "The house temperature right now is",
            "Currently the house temperature is",
            "The house temperature is currently"
            ] |random }}
            {{states.sensor.stairs_movement_temperature.state|round(0)}}
            {{ [
            "degrees",
            "degrees centigrade."
            ] |random }} 
          <break time="100ms"/>
            {{ [
            "While ",
            "And "
            ] |random }}
            {{ [
            "The thermostat is set to ",
            "The thermostat is at ",
            "The thermostat is currently at ",
            "The thermostat is currently set to "
            ] |random }}
            {{state_attr('climate.lyric', 'temperature')|round(0)}}
            {{ [
            "degrees",
            "degrees centigrade."
            ] |random }} 
          <break time="500ms"/>
            {{ [
            "I have no other news ... " ,
            "I have nothing else to report ... " ,
            "That's it for me ... " ,
            "Nothing else to report ... " ,
            "Report ends ... " ,
            "End of report ... ",
            "That's all for now ... ",
            "That's all from me ... "
            ] |random }}
            {% if now().strftime("%H")|int < 5 %}
            {{ [
            "Good night ... ",
            "Have a good night ... ",
            "Sleep well ... "
            ] |random }}
            {% elif now().strftime("%H")|int < 12 %}
            {{ [
            "Hope you have a good day ... ",
            "Hope you have a good morning ... ",
            "Enjoy your day ... ",
            "Enjoy your morning ... ",
            "Have a good morning ... ",
            "Have a great day ... ",
            "Have a good day ... "
            ] |random }}
            {% elif now().strftime("%H")|int < 18 %}
            {{ [
            "Good afternoon ... ",
            "Good day ... "
            ] |random }}
            {% else %}
            {{ [
            "Good night ... ",
            "Have a good night ... ",
            "Enjoy your evening ... ",
            "Sleep well ... "
            ] |random }}
            {% endif %}
          </speak>
########################################################
########        Welcome home script             ########
########################################################
welcome_home_script:
  alias: Welcome home
  sequence:
    - service: media_player.volume_set
      data:
        entity_id: media_player.dining_room_speaker
        volume_level: 0.4
    - delay: 00:00:04
    - service: tts.amazon_polly_say
      data_template:
        entity_id: media_player.dining_room_speaker
        message: >
          <speak>
            {{ [
            "Welcome home {{ person_arriving }} ... " ,
            "{{ person_arriving }} is home ... " ,
            "Welcome home ... " ,
            "Welcome back {{ person_arriving }} ... " ,
            "Greetings {{ person_arriving }} ... "
            ] |random }}
          <break time="1s"/>
          </speak>
    - service: script.general_status_report
      data_template:
      #  can be either Google Mini (dining_room_speaker or landing_speaker)
        mplayer: "dining_room_speaker"

# - alias: Bedroom light
#  trigger:
#    platform: state
#    entity_id: light.bedside_lamp
#    to: 'on'
#  action:
#    - service: script.audio_notify
#      data_template:
#        tts_msg: "The {{ trigger.to_state.attributes.friendly_name }} is: {{ trigger.to_state.state }}"
#        mplayer: "living_room_echo"

########################################################
########        Plant health report             ########
########################################################
tts_plant_info:
  alias: Report Plant Info
  sequence:
    - service: tts.amazon_polly_say
      data_template:
        entity_id: media_player.dining_room_speaker
        message: >
          <speak>
            '{{ [
            "OK. " ,
            "Alright. " ,
            "As you wish. " ,
            "Acknowledged. " ,
            "Affirmative. " ,
            "No problem. " ,
            " " ,
            ] |random }}'
          <break time="500ms"/>
            '{{ [
            "Here is your plant report. " ,
            "Here is your plant monitoring report. " ,
            "Here is your plant health report. " ,
            "Here is today's plant report. " ,
            "Here is today's plant health report. " ,
            "Here is today's plant monitoring report. " ,
            "Plant health updates for today. " ,
            "Plant health updates begin. " ,
            "Plant health report begins. " ,
            "Plant monitoring report begins. " ,
            "This is what the plants look like. " ,
            "This is what the plants look like today. " ,
            "This is the plant health situation. " ,
            "This is the plant health situation today. " ,
            "Todays plant report. " ,
            "Todays plant monitoring report. " ,
            "Plant health report for today.  " ,
            "Plant monitoring report for today.  " ,
            "Plant report for today.  "
            ] |random }}'
          <break time="500ms"/>
            Dragon Tree, {{ state_attr('plant.plant_monitor', 'problem') }}.
          <break time="200ms"/>
            Kentia Palm, {{ state_attr('plant.howea_forsteriana', 'problem') }}.
          <break time="500ms"/>
            '{{ [
            "End of report. " ,
            "That is all. " ,
            "Report complete. " ,
            "Report ends. " ,
            "Report concludes.  "
            ] |random }}'
          </speak>

############# Amazon Polly tests on Google Mini
############# See https://docs.aws.amazon.com/polly/latest/dg/supportedtags.html
#############
tts_polly_test:
  alias: Polly test
  sequence:
  - service: media_player.volume_set
    data:
      entity_id: media_player.dining_room_speaker
      volume_level: 0.4
  - delay: 00:00:01
  - service: tts.amazon_polly_say
    data_template:
      entity_id: media_player.dining_room_speaker
      message: >
        <speak>
            Hello from
            <break time=".9s" />
            Amazon Polly
        </speak>
tts_mp3_test:
  alias: MP3 test
  sequence:
  - service: media_player.volume_set
    data:
      entity_id: media_player.dining_room_speaker
      volume_level: 0.4
  - delay: 00:00:01
  - service: media_player.play_media
    data_template:                 
      entity_id: media_player.dining_room_speaker            
      media_content_id: https://thoughton.co.uk/_files/internet-outage.mp3
      media_content_type: 'audio/mp3' 
tts_mp3_local_test:
  alias: MP3 test local
  sequence:
  - service: media_player.volume_set
    data:
      entity_id: media_player.dining_room_speaker
      volume_level: 0.4
  - delay: 00:00:01
  - service: media_player.play_media
    data_template:                 
      entity_id: media_player.dining_room_speaker            
      media_content_id: http://192.168.0.8/mp3/internet-outage.mp3
      media_content_type: 'audio/mp3' 